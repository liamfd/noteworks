<div>Non-editable text. Editable is below:</div>
<div id="test" contenteditable="true" onkeyup="showCaretPos()" onmouseup="showCaretPos()">Hello, some <b>bold</b> and <i>italic and <b>bold</b></i> text</div>
<div id="caretPos"></div>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<style>
	.cool{
		background-color: #4400ff;
	}
</style>
<script>
	function getCaretCharacterOffsetWithin(element) {
	    var caretOffset = 0;
	    var doc = element.ownerDocument || element.document;
	    var win = doc.defaultView || doc.parentWindow;
	    var sel;
	    if (typeof win.getSelection != "undefined") {
	        var range = win.getSelection().getRangeAt(0);
	        var preCaretRange = range.cloneRange();
	        preCaretRange.selectNodeContents(element);
	        preCaretRange.setEnd(range.endContainer, range.endOffset);
	        caretOffset = preCaretRange.toString().length;
	    } else if ( (sel = doc.selection) && sel.type != "Control") {
	        var textRange = sel.createRange();
	        var preCaretTextRange = doc.body.createTextRange();
	        preCaretTextRange.moveToElementText(element);
	        preCaretTextRange.setEndPoint("EndToEnd", textRange);
	        caretOffset = preCaretTextRange.text.length;
	    }
	    return caretOffset;
	}

	function showCaretPos() {
	    var el = document.getElementById("test");
	    var caretPosEl = document.getElementById("caretPos");
	    caretPosEl.innerHTML = "Caret position: " + getCaretCharacterOffsetWithin(el);
	    caretPosEl.toggleClass("cool");
	}

//	document.body.onkeyup = showCaretPos;
//	document.body.onmouseup = showCaretPos;

</script>